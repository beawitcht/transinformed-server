{% extends 'base.html' %}

{% block body %}
<header class="d-flex justify-content-center py-3">
    <ul class="nav nav-pills">
        <li class="nav-item"><a href="/" class="nav-link active" aria-current="page">Home</a></li>
        <li class="nav-item"><a href="/about" class="nav-link">About</a></li>
        <li class="nav-item"><a href="#" class="nav-link">Other</a></li>
        <li class="nav-item"><a href="#" class="nav-link">Other other</a></li>
    </ul>
</header>


<div class="container">
    <main>
        <div class="py-5 text-center">
            <img class="d-block mx-auto mb-4" src="/static/images/logo.svg" alt="Trans Informed logo" width="216" height="216"
                height="57">
            <h1>Create your healthcare guide</h1>
            <p class="lead">Consolidating the most important information for your care into one document.</p>
        </div>

        <div class="row g-5">
            <div class="py-5">
                <h2>Document info</h2>
                <p class="mb-3 text-muted">Data to be generated</p>
                <form class="needs-validation" id="generationForm" novalidate target="_blank" action="/" method="post">
                    <div class="row g-3">
                        <div class="col-md-3 required">
                            <label for="{{ form.countries.name }}" name="country" class="form-label"> Country <span class="badge rounded-pill text-bg-danger">Required</span></label>
                            <select class="form-select {% if form.countries.errors|length > 0 %} is-invalid {% endif %}"
                                id="countries" name="{{ form.countries.name }}">
                                <option selected> Choose... </option>
                                {% for country in form.countries.choices %}
                                <option>{{ country }}</option>
                                {% endfor %}
                            </select>
                            <div class="invalid-feedback ">
                                {% for error in form.countries.errors %}
                                {{error}}
                                {% endfor %}
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-check form-switch">
                                <input class="form-check-input" name="{{ form.formal_diagnosis.name }}" type="checkbox"
                                    role="switch" id="diagnosisCheck">
                                <label class="form-check-label" for="diagnosisCheck">I have a formal Diagnosis</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-check form-switch">
                                <input name="{{ form.self_med.name }}" class="form-check-input" type="checkbox"
                                    role="switch" id="selfMedCheck">
                                <label class="form-check-label" for="selfMedCheck">I am self medicating</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-check form-switch">
                                <input class="form-check-input" name="{{ form.self_med_likely.name }}" type="checkbox"
                                    role="switch" id="likelyMedCheck">
                                <label class="form-check-label" for="likelyMedCheck">I am likely to start self medicating</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-check form-switch">
                                <input name="{{ form.bridging_desired.name }}" class="form-check-input" type="checkbox"
                                    role="switch" id="bridgingDesired">
                                <label class="form-check-label" for="bridgingDesired">I need a bridging prescription</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-check form-switch">
                                <input class="form-check-input" name="{{ form.shared_care.name }}" type="checkbox"
                                    role="switch" id="sharedCareCheck">
                                <label class="form-check-label" for="sharedCareCheck">I need a shared care agreement with my GP and a private service</label>
                            </div>
                        </div>
                        

                        <hr class="my-4">
                        <h2>About you</h2>
                        <p class="mb-3 text-muted">All details are optional</p>
                        <div class="row gy-3">
                            <div class="col-sm-6">
                                <label for="firstName" class="form-label">{{ form.name.label }}</label>
                                <input type="text" class="form-control" id="firstName" name="{{ form.name.name }}"
                                    placeholder="Name" value="">
                            </div>

                            <div class="col-sm-6">
                                <label for="lastName" class="form-label">{{ form.surname.label }} </label>
                                <input type="text" class="form-control" id="lastName" name="{{ form.surname.name }}"
                                    placeholder="Surname" value="">
                            </div>

                            <div class="col-12">
                                <label for="email" class="form-label">Email <span
                                        class="text-muted"></span></label>
                                <input type="email" class="form-control {% if form.email.errors|length > 0 %} is-invalid {% endif %}" id="email" name="{{ form.email.name }}"
                                    placeholder="you@example.com">
                                
                                <div class="invalid-feedback ">
                                    {% for error in form.email.errors %}
                                    {{error}}
                                    {% endfor %}
                                </div>
                            </div>

                            <div class="col-md-2">
                                <label for="phoneNumber" class="form-label"> {{form.phone.label}} <span
                                        class="text-muted"></span></label>
                                <input type="phoneNumber" class="form-control" name="{{ form.phone.name }}"
                                    id="phoneNumber" placeholder="+4412345678910">
                            </div>
                            <hr class="my-4">

                            <div class="d-flex justify-content-center">
                                {{ form.captcha }}
                            </div>
                            
                            {% if form.captcha.errors|length > 0 %}
                                <span class="error text-danger text-center">Captcha incorrect!</span>
                            {% endif %}

                        </div>


                        <div class="btn-group">
                            <button class="btn btn-outline-primary btn-lg mr-3" id="docx" name="docx" type="submit"
                                value="docx">Generate Docx</button>
                            {% if not pdf_available %}
                            <button class="btn btn-outline-primary btn-lg disabled" id="pdf" name="pdf" type="submit"
                                value="pdf">PDF Unavailable</button>
                            {% else %}
                            <button class="btn btn-outline-primary btn-lg " name="pdf" type="submit"
                                value="pdf">Generate PDF</button>
                            {% endif %}
                        </div>
                </form>
            </div>
        </div>

    </main>
</div>
{% endblock %}